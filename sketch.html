<html>
  <head>
  <meta charset="UTF-8">
  <script src="https://github.com/processing/p5.js/releases/download/0.5.16/p5.js"></script> 
  <script>

let iniciar, regras, creditos, sair;
var tela_ativa = 0
var opcao = 1
var x = 475
var y = 95

var heroR = [],heroL = [], heroU = [];
var heroR = false, heroU = false, heroL = false, cont = 0;
var xSpace;
var playWeaponState = false;
var heroS = true;
var Xo = 0;
var Yo = 160;
var xWalk = 0;
var yJump = 20;
//tela ativa 0 = menu
//tela ativa 1 = jogar
//tela ativa 2 = regras
//tela ativa 3 = creditos
//tela ativa 4 = sair
//Variáveis para serem usados no menu
let value = 0;

function setup() {
  createCanvas(1280, 720);
  background('black');
}

function preload() {
  fundodafase = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/backgroundgame.jpeg'); //Fundo do game
  hero = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/GIFS/Fudje%20duyxce%202.gif'); //personagem parado
  heroPlay = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/GIFS/Jogando%20o%20bisturi%20invertido.gif') //personagem atacando
  for(i = 0; i < 1  ; i++) {
  heroR = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/GIFS/Fudje%20duyxce%20andando%20direita%20com%20arma.gif');
  heroL = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/GIFS/Fudje%20duyxce%20andando%20esquerda%20com%20arma.gif')
  heroU = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/GIFS/Fudje%20duyxce%20pulando%20direita.gif');     
  heroL = loadImage('https://raw.githubusercontent.com/ZirGG/ueboy.github.io/master/Fudje%20duyxce%20andando%20esquerda%20com%20arma.gif');
}
  /*monster = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/Monstro.gif');
  globFrente = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/normal_gobulo_frente.png') ;
  globLado = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/normal_globulo_lado.png');
  arma = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/arma.gif');
  raio = loadImage('https://raw.githubusercontent.com/Ueboy/ueboy.github.io/master/raio.gif');
  */
  }

function draw() {
  switch (tela_ativa) {
    case 0:
      menu();
      break;
    case 1:
      jogar();
      break;
    case 2:
      rules();
      break
    case 3:
      credits();
      break;
    case 4:
      quit();
      break;
  }

}

function menu() {
  background('black');
  fill('white');
  stroke('black');
  strokeWeight(4);
  rect(480, 0, 1, 1, 50);
  rect(480, 100, 320, 90, 50);
  rect(480, 200, 320, 90, 50);
  rect(480, 300, 320, 90, 50);
  rect(480, 400, 320, 90, 50);

  textSize(48);
  fill('black');

  text('Jogar', 580, 160);
  text('Regras', 560, 260);
  text('Creditos', 545, 360);
  text('Sair', 590, 460);

  noFill();
  stroke(266,0,0);
  strokeWeight(4);
  rect(x,y,330,100);
}

function rules() {
  background('black')

  fill('white');
  stroke('black');
  strokeWeight(1);

  textSize(28);
  fill('white')
  
  text('Use as setas do teclado para selecionar as opções e andar no game.', 40, 55);
}


function credits() {

  background('black');

  fill('white');
  stroke('black');
  strokeWeight(1);

  textSize(28);
  fill('white')

  text('The Last disease, é um jogo Feito para o trabalho final da disciplina de Lógica de Programação \n (LOP) do ano 2019.2 pelos alunos: Marcus Vinicius, Victor Alves e Ellen Dantas.', 40, 55);
}

function quit() {
  //R, G, B
  background('#BDB76B');

  fill('white');
  stroke('black');
  strokeWeight(1);

  textSize(28);
  fill('black');

  text('saindo', 40, 55);
  window.close();
}

function keyPressed(){
  
  if(tela_ativa == 1){
      if(keyCode === RIGHT_ARROW && (! heroR)) {
    heroR = true;
    heroS = false;
    heroU = false;
    heroL = false;
  }
  if(keyCode === UP_ARROW && (! heroU)) {
    heroU = true;
    heroS = false;
    heroR = false;
    heroL = false;
  }
  if(keyCode === LEFT_ARROW && (! heroL)) {
    heroR = false;
    heroU = false;
    heroS = false;
    heroL = true;
  }
  if(keyCode === 32 && (! playWeaponState)) {
    playWeaponState = true;
    heroR = false;
    heroU = false;
    heroS = false;
    heroL = false;
  }}
  

  
  
  if(tela_ativa == 2 || tela_ativa == 3)
    tela_ativa = 0;
  
  if (keyCode === ENTER)
    tela_ativa = opcao;
  
  if(keyCode == BACKSPACE)
    tela_ativa = 0
  
  if(keyCode === DOWN_ARROW){
    if(y<300){
    y+=100;
    if(opcao==0)
    opcao=1;
    else
    if(opcao==1)
    opcao=2;
    else
    if(opcao==2)
    opcao=3;
    else
    if(opcao==3)
    opcao=4;
    }
    
  }else 
    if(keyCode===UP_ARROW){
    if(y>0){
      y-=100
      if(opcao==1){
      opcao=0
      } else{
      if(opcao==2){
      opcao=1
      } else{
      if(opcao==3){
      opcao=2
      }else{
      if(opcao==4){
      opcao=3
      }
      }
      }
      }
      }
      }
  console.log("opcao: "+opcao);
  console.log("Tela ativa: "+tela_ativa);
}

//////////////////////////////////////////////////////////////////////////////
function jogar() {

  image(fundodafase, 0, 0, 2560, 720);  
  image(hero, 0, 100); 
  if(heroS) {
  image(hero, 0, 320, 400, 400);
  }
  if(heroR) { 
    image(heroR[ cont ],Xo + xWalk, Yo);
    xSpace = Xo + xWalk;
    cont++;
    xWalk += 3;  
  } 
  if(heroL) {
    image(heroL[ cont ],xSpace - xWalk, Yo);
    cont++;
    xWalk += 3;
  }
 if(playWeaponState) {
    image(heroPlay,Xo + xWalk, Yo);
    xWalk += 3;
  }
  if(heroU) {
    image(heroU[ cont ], Xo, Yo - yJump);
    cont++;
    yJump += 2;
    if(yJump >=150) {
      yJump = 0;
    }
  }
  if(cont >= 1) {
    cont = 0;
  }
 
 /*image(monster, 300, 85);  
  image(globFrente, 600, 110);
  image(globLado, 600, 80);
  image(arma, 700, 75);
  image(raio, 800, 100);
  keyPressed();
  main();*/
  
}
    
    </script>
    <style> body {padding: 0; margin: 0;} </style>
  </head>
</html>
